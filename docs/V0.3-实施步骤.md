# V0.3 å®æ–½æ­¥éª¤è§„åˆ’

## ç›®æ ‡
è®©ç½‘ç«™æ›´æœ‰è¶£ã€æ›´æœ‰åŠ¨æ¼«æ„Ÿï¼Œå¢å¼º AI é—®ç­”èƒ½åŠ›

---

## åŠŸèƒ½æ‹†è§£ä¸æŠ€èƒ½éœ€æ±‚

### åŠŸèƒ½ 1: è§’è‰²å£å¤´ç¦… â­ ç®€å•

#### æ­¥éª¤æ¸…å•

| æ­¥éª¤ | ä»»åŠ¡ | ä½¿ç”¨æŠ€èƒ½ | éœ€è¦ä¸‹è½½ |
|------|------|----------|----------|
| 1.1 | ä¸ºé¡¹ç›®æ·»åŠ å£å¤´ç¦…é…ç½® | TypeScript | âŒ |
| 1.2 | åˆ›å»ºæ°”æ³¡æç¤ºç»„ä»¶ | React ç»„ä»¶ | âŒ |
| 1.3 | å®ç°ç‚¹å‡»è§¦å‘é€»è¾‘ | useState | âŒ |
| 1.4 | æ·»åŠ æ°”æ³¡å¼¹å‡ºåŠ¨ç”» | CSS åŠ¨ç”» | âŒ |
| 1.5 | ç‚¹å‡»å¤–éƒ¨å…³é—­æ°”æ³¡ | useEffect | âŒ |

#### éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

```
app/components/CatchphraseBubble.tsx  # æ°”æ³¡ç»„ä»¶ï¼ˆæ–°å»ºï¼‰
app/page.tsx                            # ä¿®æ”¹ï¼šæ·»åŠ å£å¤´ç¦…é…ç½®
```

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

- `app/types.ts` - æ·»åŠ  catchphrase å­—æ®µ
- `app/components/ProjectCard.tsx` - é›†æˆæ°”æ³¡ç»„ä»¶

#### ä»£ç ç¤ºä¾‹

**1. ç±»å‹å®šä¹‰**
```typescript
// app/types.ts
export interface Project {
  emoji: string;
  title: string;
  description: string;
  link: string;
  catchphrase: string;  // æ–°å¢
}
```

**2. é¡¹ç›®æ•°æ®**
```typescript
// app/page.tsx
const PROJECTS: Project[] = [
  {
    emoji: 'ğŸ’',
    title: 'æç®€è®°è´¦æœ¬',
    description: 'ç®€æ´é«˜æ•ˆçš„è®°è´¦å·¥å…·',
    link: 'https://minimal-ledger.vercel.app/',
    catchphrase: 'é¾Ÿæ´¾æ°”åŠŸï¼ğŸ’¥',  // æ–°å¢
  },
  // ... å…¶ä»–é¡¹ç›®
];
```

**3. æ°”æ³¡ç»„ä»¶**
```typescript
// app/components/CatchphraseBubble.tsx
'use client';

interface Props {
  emoji: string;
  catchphrase: string;
  isVisible: boolean;
  onClose: () => void;
  position: { x: number; y: number };
}

export default function CatchphraseBubble({
  emoji, catchphrase, isVisible, onClose, position
}: Props) {
  if (!isVisible) return null;

  return (
    <div
      className="fixed z-50 px-4 py-2 rounded-xl pointer-events-none"
      style={{
        left: position.x,
        top: position.y,
        transform: 'translate(-50%, -100%) translateY(-10px)',
        background: 'linear-gradient(135deg, var(--dragon-gold) 0%, var(--dragon-orange) 100%)',
        color: '#000',
        fontWeight: 'bold',
        boxShadow: '0 4px 20px rgba(255, 107, 0, 0.5)',
        animation: 'bubble-pop 0.3s ease-out',
      }}
    >
      <div className="flex items-center gap-2">
        <span className="text-2xl">{emoji}</span>
        <span className="font-zcool">{catchphrase}</span>
      </div>
      {/* å°ä¸‰è§’ç®­å¤´ */}
      <div
        className="absolute left-1/2 -translate-x-1/2 bottom-0 translate-y-full"
        style={{
          borderLeft: '8px solid transparent',
          borderRight: '8px solid transparent',
          borderTop: '8px solid var(--dragon-orange)',
        }}
      />
    </div>
  );
}
```

---

### åŠŸèƒ½ 2: é¼ æ ‡æ‚¬åœåŠ¨ç”»å¢å¼º â­ ç®€å•

#### æ­¥éª¤æ¸…å•

| æ­¥éª¤ | ä»»åŠ¡ | ä½¿ç”¨æŠ€èƒ½ | éœ€è¦ä¸‹è½½ |
|------|------|----------|----------|
| 2.1 | å¡ç‰‡æ‚¬åœæ•ˆæœå¢å¼º | Tailwind CSS | âŒ |
| 2.2 | è§’è‰² emoji åŠ¨ç”» | CSS @keyframes | âŒ |
| 2.3 | èƒ½é‡å…‰æ™•æ•ˆæœ | box-shadow åŠ¨ç”» | âŒ |
| 2.4 | é¾™ç è£…é¥°äº’åŠ¨ | CSS äº¤äº’ | âŒ |

#### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

```
app/components/ProjectCard.tsx      # å¡ç‰‡ç»„ä»¶
app/components/DragonBall.tsx       # é¾™ç ç»„ä»¶
app/app/globals.css                 # æ·»åŠ åŠ¨ç”»
```

#### ä»£ç ç¤ºä¾‹

**1. å¡ç‰‡æ‚¬åœå¢å¼º**
```typescript
// app/components/ProjectCard.tsx
<div
  className="relative cursor-pointer transition-all duration-300"
  style={{
    background: 'var(--bg-card)',
    border: '1px solid var(--border-gold)',
    borderRadius: '16px',
  }}
  onMouseEnter={(e) => {
    e.currentTarget.style.transform = 'scale(1.05)';
    e.currentTarget.style.boxShadow = '0 0 30px var(--dragon-orange-glow)';
    e.currentTarget.style.borderColor = 'var(--dragon-gold)';
  }}
  onMouseLeave={(e) => {
    e.currentTarget.style.transform = 'scale(1)';
    e.currentTarget.style.boxShadow = 'none';
    e.currentTarget.style.borderColor = 'var(--border-gold)';
  }}
>
```

**2. Emoji åŠ¨ç”»**
```css
/* app/globals.css */
@keyframes character-bounce {
  0%, 100% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  75% {
    transform: scale(1.1) rotate(5deg);
  }
}

.character-emoji:hover {
  animation: character-bounce 0.5s ease-in-out;
}
```

**3. èƒ½é‡å…‰æ™•æ•ˆæœ**
```css
/* app/globals.css */
@keyframes energy-pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px var(--dragon-orange),
                0 0 40px rgba(255, 107, 0, 0.3);
  }
  50% {
    box-shadow: 0 0 40px var(--dragon-gold),
                0 0 60px var(--dragon-orange),
                0 0 80px rgba(255, 215, 0, 0.5);
  }
}

.energy-glow {
  animation: energy-pulse-glow 2s ease-in-out infinite;
}
```

---

### åŠŸèƒ½ 3: AI çŸ¥è¯†åº“ï¼ˆRAGï¼‰ â­â­â­ å¤æ‚

#### æ­¥éª¤æ¸…å•

| æ­¥éª¤ | ä»»åŠ¡ | ä½¿ç”¨æŠ€èƒ½ | éœ€è¦ä¸‹è½½ |
|------|------|----------|----------|
| 3.1 | å®‰è£…ä¾èµ–åŒ… | npm | âœ… æ˜¯ |
| 3.2 | é…ç½®ç¯å¢ƒå˜é‡ | Upstash/OpenAI | âœ… æ˜¯ |
| 3.3 | åˆ›å»º Embeddings å·¥å…· | OpenAI SDK | âœ… æ˜¯ |
| 3.4 | åˆ›å»º Vector å®¢æˆ·ç«¯ | Upstash Vector | âŒ å·²å®‰è£… |
| 3.5 | å®ç°æ–‡ç« åˆ†å— | TypeScript | âŒ |
| 3.6 | å®ç°æ–‡ç« ç´¢å¼• | API | âŒ |
| 3.7 | å®ç°å‘é‡æœç´¢ | API | âŒ |
| 3.8 | é›†æˆåˆ°èŠå¤© API | API | âŒ |

#### éœ€è¦ä¸‹è½½çš„åŒ…

```bash
# Embeddings APIï¼ˆé€‰ä¸€ä¸ªï¼‰
npm install openai              # OpenAIï¼ˆä»˜è´¹ï¼‰
# æˆ–
npm install @mixbread-ai/sdk    # MixBreadï¼ˆå…è´¹ï¼Œæ¨èï¼‰

# Upstash Vectorï¼ˆæ£€æŸ¥æ˜¯å¦å·²æœ‰ï¼‰
npm install @upstash/vector
```

#### éœ€è¦é…ç½®çš„ç¯å¢ƒå˜é‡

```bash
# .env.local
# Embeddings APIï¼ˆé€‰ä¸€ä¸ªï¼‰
OPENAI_API_KEY=sk-xxx
# æˆ–
MIXBREAD_API_KEY=xxx

# Upstash Vector
UPSTASH_VECTOR_REST_URL=https://xxx.upstash.io
UPSTASH_VECTOR_REST_TOKEN=xxxxx
```

#### éœ€è¦åˆ›å»ºçš„æ–‡ä»¶

```
app/lib/
â”œâ”€â”€ embeddings.ts       # Embeddings å·¥å…·ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ vector.ts           # Upstash å®¢æˆ·ç«¯ï¼ˆæ–°å»ºï¼‰
â”œâ”€â”€ rag.ts              # RAG å·¥å…·å‡½æ•°ï¼ˆæ–°å»ºï¼‰
â””â”€â”€ article-chunker.ts   # æ–‡ç« åˆ†å—ï¼ˆæ–°å»ºï¼‰

app/api/articles/
â””â”€â”€ index/route.ts       # ä¿®æ”¹ï¼šä¸Šä¼ æ—¶ç´¢å¼•

app/api/chat/
â””â”€â”€ route.ts            # ä¿®æ”¹ï¼šé›†æˆ RAG
```

#### ä»£ç ç¤ºä¾‹

**1. Embeddings å·¥å…·**
```typescript
// app/lib/embeddings.ts
import { OpenAI } from 'openai';

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export async function generateEmbedding(text: string): Promise<number[]> {
  const response = await openai.embeddings.create({
    model: 'text-embedding-3-small',
    input: text,
  });

  return response.data[0].embedding;
}
```

**2. Vector å®¢æˆ·ç«¯**
```typescript
// app/lib/vector.ts
import { Index } from '@upstash/vector';

export const vectorIndex = new Index({
  url: process.env.UPSTASH_VECTOR_REST_URL!,
  token: process.env.UPSTASH_VECTOR_REST_TOKEN!,
});
```

**3. æ–‡ç« åˆ†å—**
```typescript
// app/lib/article-chunker.ts
export function chunkArticle(content: string, chunkSize = 500): string[] {
  const chunks: string[] = [];
  const paragraphs = content.split('\n\n');
  let currentChunk = '';

  for (const paragraph of paragraphs) {
    if ((currentChunk + paragraph).length > chunkSize) {
      if (currentChunk) chunks.push(currentChunk);
      currentChunk = paragraph;
    } else {
      currentChunk += (currentChunk ? '\n\n' : '') + paragraph;
    }
  }

  if (currentChunk) chunks.push(currentChunk);
  return chunks;
}
```

**4. æ–‡ç« ç´¢å¼•**
```typescript
// app/lib/rag.ts
import { vectorIndex } from './vector';
import { generateEmbedding } from './embeddings';
import { chunkArticle } from './article-chunker';

export async function indexArticle(
  articleId: string,
  title: string,
  content: string
) {
  const chunks = chunkArticle(content);

  for (let i = 0; i < chunks.length; i++) {
    const embedding = await generateEmbedding(chunks[i]);

    await vectorIndex.upsert({
      id: `${articleId}-chunk-${i}`,
      vector: embedding,
      metadata: {
        articleId,
        title,
        content: chunks[i],
      },
    });
  }

  console.log(`âœ… æ–‡ç«  ${title} å·²ç´¢å¼•ï¼Œå…± ${chunks.length} å—`);
}
```

**5. å‘é‡æœç´¢**
```typescript
// app/lib/rag.ts
export async function searchRelevantContent(
  query: string,
  topK = 3
): Promise<string[]> {
  const queryEmbedding = await generateEmbedding(query);

  const results = await vectorIndex.query({
    vector: queryEmbedding,
    topK,
    includeMetadata: true,
  });

  return results
    .filter(r => r.metadata)
    .map(r => r.metadata!.content as string);
}
```

**6. é›†æˆåˆ°èŠå¤© API**
```typescript
// app/api/chat/route.ts
import { searchRelevantContent } from '@/lib/rag';

export async function POST(request: Request) {
  const { message } = await request.json();

  // æœç´¢ç›¸å…³æ–‡ç« å†…å®¹
  const relevantContent = await searchRelevantContent(message, 3);

  // æ„é€ å¢å¼º Prompt
  const systemPrompt = `
ä½ æ˜¯ Doubleå…” ä½œå“é›†çš„ AI åŠ©æ‰‹ã€‚

å‚è€ƒæ–‡ç« å†…å®¹ï¼š
${relevantContent.map((c, i) => `[${i + 1}] ${c}`).join('\n\n')}

è¯·åŸºäºä»¥ä¸Šå‚è€ƒå†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚å¦‚æœå‚è€ƒå†…å®¹ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯šå®å‘ŠçŸ¥ã€‚
  `;

  // è°ƒç”¨ AI...
}
```

---

## å®æ–½å»ºè®®

### æ–¹æ¡ˆ Aï¼šåªåšåŠŸèƒ½ 1+2ï¼ˆæ¨èï¼‰

**æ—¶é—´**ï¼š1-2 å¤©
**éš¾åº¦**ï¼šâ­ ç®€å•
**ä¾èµ–**ï¼šæ— éœ€ä¸‹è½½

```
Day 1 ä¸Šåˆï¼šè§’è‰²å£å¤´ç¦…
â”œâ”€â”€ é…ç½®æ•°æ®
â”œâ”€â”€ åˆ›å»ºæ°”æ³¡ç»„ä»¶
â””â”€â”€ æµ‹è¯•

Day 1 ä¸‹åˆï¼šæ‚¬åœåŠ¨ç”»
â”œâ”€â”€ å¡ç‰‡åŠ¨ç”»
â””â”€â”€ é¾™ç äº’åŠ¨

Day 2ï¼šæ•´ä½“è°ƒä¼˜
```

### æ–¹æ¡ˆ Bï¼šå…¨éƒ¨åšï¼ˆéœ€è¦å­¦ä¹ ï¼‰

**æ—¶é—´**ï¼š3-5 å¤©
**éš¾åº¦**ï¼šâ­â­â­ å¤æ‚
**ä¾èµ–**ï¼šéœ€è¦å®‰è£… OpenAI/MixBread + Upstash Vector

```
Day 1-2ï¼šåŠŸèƒ½ 1+2
Day 3ï¼šé…ç½®ç¯å¢ƒ + å®‰è£…ä¾èµ–
Day 4ï¼šå®ç° RAG
Day 5ï¼šæµ‹è¯•è°ƒä¼˜
```

---

## æ–‡ä»¶æ¸…å•

### åŠŸèƒ½ 1+2 éœ€è¦çš„æ–‡ä»¶

```
app/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CatchphraseBubble.tsx    # æ–°å»º
â”‚   â”œâ”€â”€ ProjectCard.tsx           # ä¿®æ”¹
â”‚   â””â”€â”€ DragonBall.tsx            # ä¿®æ”¹
â”œâ”€â”€ types.ts                       # ä¿®æ”¹
â”œâ”€â”€ page.tsx                       # ä¿®æ”¹
â””â”€â”€ globals.css                    # ä¿®æ”¹
```

### åŠŸèƒ½ 3 é¢å¤–éœ€è¦çš„æ–‡ä»¶

```
app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ embeddings.ts              # æ–°å»º
â”‚   â”œâ”€â”€ vector.ts                  # æ–°å»º
â”‚   â”œâ”€â”€ rag.ts                     # æ–°å»º
â”‚   â””â”€â”€ article-chunker.ts         # æ–°å»º
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ articles/route.ts          # ä¿®æ”¹
â”‚   â””â”€â”€ chat/route.ts              # ä¿®æ”¹
â””â”€â”€ .env.local                     # æ–°å»º
```

---

## ä¾èµ–åŒ…æ¸…å•

### åŠŸèƒ½ 1+2
```bash
# æ— éœ€ä¸‹è½½ä»»ä½•åŒ…
```

### åŠŸèƒ½ 3
```bash
# Embeddingsï¼ˆé€‰ä¸€ä¸ªï¼‰
npm install openai              # OpenAI
# æˆ–
npm install @mixbread-ai/sdk    # MixBreadï¼ˆå…è´¹ï¼‰

# å‘é‡æ•°æ®åº“ï¼ˆæ£€æŸ¥æ˜¯å¦å·²æœ‰ï¼‰
npm install @upstash/vector     # å¦‚æœæ²¡æœ‰åˆ™å®‰è£…
```

---

## éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½ 1: è§’è‰²å£å¤´ç¦…
- [ ] ç‚¹å‡»é¡¹ç›®å¡ç‰‡æ˜¾ç¤ºå£å¤´ç¦…æ°”æ³¡
- [ ] æ°”æ³¡æœ‰å¼¹å‡ºåŠ¨ç”»
- [ ] ç‚¹å‡»å¤–éƒ¨å¯å…³é—­
- [ ] 5 ä¸ªé¡¹ç›®å„æœ‰å£å¤´ç¦…

### åŠŸèƒ½ 2: æ‚¬åœåŠ¨ç”»
- [ ] å¡ç‰‡æ‚¬åœæœ‰æ”¾å¤§æ•ˆæœ
- [ ] è¾¹æ¡†å‘å…‰åŠ¨ç”»
- [ ] Emoji æœ‰å¼¹è·³åŠ¨ç”»
- [ ] é¾™ç æœ‰äº’åŠ¨æ•ˆæœ

### åŠŸèƒ½ 3: AI çŸ¥è¯†åº“
- [ ] æ–‡ç« ä¸Šä¼ æ—¶è‡ªåŠ¨ç´¢å¼•
- [ ] AI èƒ½åŸºäºæ–‡ç« å›ç­”é—®é¢˜
- [ ] ç›¸å…³æ–‡ç« è¢«æ­£ç¡®æ£€ç´¢

---

## ä¸‹ä¸€æ­¥

**é€‰æ‹©å®æ–½æ–¹æ¡ˆ**ï¼š

1. **æ–¹æ¡ˆ A** - åªåšå£å¤´ç¦… + åŠ¨ç”»ï¼ˆ1-2 å¤©ï¼Œç®€å•ï¼‰
2. **æ–¹æ¡ˆ B** - å…¨éƒ¨åšï¼ˆ3-5 å¤©ï¼Œå¤æ‚ï¼‰

**ä½ æƒ³é€‰å“ªä¸ªï¼Ÿ**

---

*åˆ›å»ºæ—¶é—´ï¼š2025-02-04*
*ç‰ˆæœ¬ï¼šV0.3 å®æ–½æ­¥éª¤*
